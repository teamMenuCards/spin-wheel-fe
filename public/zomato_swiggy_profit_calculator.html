<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zomato/Swiggy Monthly Profit Calculator</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f2f5;
      padding: 30px;
      color: #333;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }
    .logo-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 10px;
    }
    .logo-bar img {
      height: 50px;
    }
    h2 {
      color: #007bff;
      text-align: center;
      font-size: 1.75rem;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: bold;
    }
    input, select {
      padding: 10px;
      width: 100%;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    .row {
      display: flex;
      gap: 10px;
    }
    .row input, .row select {
      flex: 1;
    }
    button {
      margin-top: 25px;
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      color: white;
      background-color: #28a745;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .button-negative {
      background: #dc3545 !important;
    }
    .result {
      margin-top: 30px;
      padding: 20px;
      background: #f9f9f9;
      border-left: 5px solid #28a745;
      border-radius: 6px;
    }
    .result.negative {
      border-left-color: #dc3545;
    }
    .result.negative::before {
      content: "⚠️ Warning: Your business is running at a loss!";
      display: block;
      font-weight: bold;
      color: #dc3545;
      margin-bottom: 12px;
    }
    .chart-title {
      margin-top: 40px;
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
    }
    canvas {
      display: block;
      margin: 20px auto 0;
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo-bar">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Zomato_logo.png/320px-Zomato_logo.png" alt="Zomato Logo">
      <img src="https://cdn.worldvectorlogo.com/logos/swiggy-1.svg" alt="Swiggy Logo">
    </div>
    <h2>Zomato/Swiggy Monthly Profit Calculator</h2>

    <label>Total Monthly Sales:
      <input type="number" id="totalSales" />
    </label>
    <label>Total Discount Given:
      <input type="number" id="discountGiven" />
    </label>
    <label>Platform Commission (%):
      <input type="number" id="commissionPercent" />
    </label>

    <label>Food Cost:</label>
    <div class="row">
      <input type="number" id="foodCost" />
      <select id="foodCostType">
        <option value="percent">%</option>
        <option value="amount">₹</option>
      </select>
    </div>

    <label>Staff Salary:</label>
    <div class="row">
      <input type="number" id="staffSalary" />
      <select id="staffSalaryType">
        <option value="percent">%</option>
        <option value="amount">₹</option>
      </select>
    </div>

    <label>Electricity & Rent:</label>
    <div class="row">
      <input type="number" id="electricityRent" />
      <select id="electricityRentType">
        <option value="percent">%</option>
        <option value="amount">₹</option>
      </select>
    </div>

    <label>Misc:</label>
    <div class="row">
      <input type="number" id="miscCost" />
      <select id="miscCostType">
        <option value="percent">%</option>
        <option value="amount">₹</option>
      </select>
    </div>

    <label>Wastage:</label>
    <div class="row">
      <input type="number" id="wastageCost" />
      <select id="wastageCostType">
        <option value="percent">%</option>
        <option value="amount">₹</option>
      </select>
    </div>

    <label>Marketing:</label>
    <div class="row">
      <input type="number" id="marketingCost" />
      <select id="marketingCostType">
        <option value="percent">%</option>
        <option value="amount">₹</option>
      </select>
    </div>

    <button id="calcButton" onclick="calculateMonthlyProfit()">Calculate Monthly Profit</button>
    <div class="result" id="result"></div>

    <div class="chart-title">Monthly Revenue vs Expense</div>
    <canvas id="barChart" width="400" height="200"></canvas>

    <div class="chart-title">Expense Breakdown</div>
    <canvas id="expenseChart" width="400" height="300"></canvas>
  </div>

  <script>
    function calculateMonthlyProfit() {
      const totalSales = parseFloat(document.getElementById('totalSales').value) || 0;
      const discount = parseFloat(document.getElementById('discountGiven').value) || 0;
      const commissionPercent = parseFloat(document.getElementById('commissionPercent').value) || 0;
      const afterDiscount = totalSales - discount;
      const commission = (commissionPercent / 100) * afterDiscount;
      const payout = afterDiscount - commission;
      const base = totalSales - commission;

      const getCost = (id, typeId) => {
        const val = parseFloat(document.getElementById(id).value) || 0;
        const type = document.getElementById(typeId).value;
        return type === 'percent' ? (val / 100) * base : val;
      };

      const food = getCost('foodCost', 'foodCostType');
      const staff = getCost('staffSalary', 'staffSalaryType');
      const rent = getCost('electricityRent', 'electricityRentType');
      const misc = getCost('miscCost', 'miscCostType');
      const waste = getCost('wastageCost', 'wastageCostType');
      const marketing = getCost('marketingCost', 'marketingCostType');

      const totalOperationalCost = food + staff + rent + misc + waste + marketing;
      const totalExpense = discount + commission + totalOperationalCost;
      const profit = payout - totalOperationalCost;
      const profitPercent = payout !== 0 ? (profit / payout) * 100 : 0;

      const result = document.getElementById("result");
      const button = document.getElementById("calcButton");
      result.className = 'result' + (profit < 0 ? ' negative' : '');
      button.className = profit < 0 ? 'button-negative' : '';

      result.innerHTML = `
        <strong>Total Monthly Sales:</strong> ₹${totalSales.toLocaleString('en-IN')}<br>
        <strong>Total Discount Given:</strong> ₹${discount.toLocaleString('en-IN')}<br>
        <strong>Platform Commission Paid:</strong> ₹${commission.toLocaleString('en-IN')}<br>
        <strong>Total Operational Cost:</strong> ₹${totalOperationalCost.toLocaleString('en-IN')}<br>
        <strong>Total Expense:</strong> ₹${totalExpense.toLocaleString('en-IN')}<br><br>
        <strong>Net Profit:</strong> ₹${profit.toLocaleString('en-IN')}<br>
        <strong>Final Profit Percentage (on payout):</strong> ${profitPercent.toFixed(2)}%
      `;

      // Bar Chart (Revenue vs Total Expense)
      const ctxBar = document.getElementById('barChart').getContext('2d');
      if (window.barChartInstance) window.barChartInstance.destroy();
      window.barChartInstance = new Chart(ctxBar, {
        type: 'bar',
        data: {
          labels: ['Total Monthly Sales', 'Total Expense'],
          datasets: [{
            label: '₹ Value',
            data: [totalSales, totalExpense],
            backgroundColor: ['#007bff', '#dc3545']
          }]
        },
        options: {
  responsive: true,
  scales: {
    y: {
      beginAtZero: true,
      ticks: {
        callback: (value) => '₹' + value.toLocaleString('en-IN')
      }
    }
  },
  plugins: {
    legend: {
      display: false  // ✅ This hides the "₹ Value" legend
    },
    tooltip: {
      callbacks: {
        label: (ctx) => `₹ Value: ${ctx.raw.toLocaleString('en-IN')}`
      }
    }
  }
}

      });

      // Pie Chart (Updated Expense Breakdown)
const ctxPie = document.getElementById('expenseChart').getContext('2d');
if (window.expenseChartInstance) window.expenseChartInstance.destroy();
window.expenseChartInstance = new Chart(ctxPie, {
  type: 'pie',
  data: {
    labels: [
      'Food',
      'Staff',
      'Rent',
      'Misc',
      'Wastage',
      'Marketing',
      'Discount',
      'Platform Commission'
    ],
    datasets: [{
      data: [
        food,
        staff,
        rent,
        misc,
        waste,
        marketing,
        discount,
        commission
      ],
      backgroundColor: [
        '#007bff', '#28a745', '#ffc107', '#17a2b8',
        '#fd7e14', '#6f42c1', '#d63384', '#343a40'
      ]
    }]
  },
  options: {
    plugins: {
      legend: { position: 'bottom' },
      datalabels: {
        formatter: (value, ctx) => {
          let total = ctx.chart._metasets[0].total;
          return ((value / total) * 100).toFixed(1) + '%';
        },
        color: '#fff',
        font: { weight: 'bold' }
      }
    }
  },
  plugins: [ChartDataLabels]
});

    }
  </script>
</body>
</html>
